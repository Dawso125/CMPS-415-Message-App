<!-- dashboard.ejs -->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Bobber Dashboard</title>
		<!-- Link to Bootstrap CSS file -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<!-- Link to the external CSS file -->
		<link href="css/App.css" rel="stylesheet" />
		<style>
			/* Add additional styles specific to this page if needed */
		</style>
	</head>
	<body class="home-body">
		<div class="container">
			<h1 class="home-heading">Bobber Dashboard</h1>
			<% if (username) { %>
			<h2 class="lead">Logged in as: <%= username %></h2>
			<% } else { %>
			<p class="lead">Not logged in</p>
			<% } %>

			<div class="d-grid gap-2">
				<a href="/createTopic" class="btn btn-primary home-btn"
					>Create New Topic</a
				>
			</div>

			<h3>All Topics:</h3>
			<ul class="list-group">
				<% topics.forEach(function(topic) { %>
				<li class="list-group-item">Title: <%= topic.Title %></li>
				<% if (topic.Posts && topic.Posts.length > 0) { %>
				<li class="list-group-item">
					Posts: <% topic.Posts.forEach(function(post) { %> <%= post %><br />
					<% }); %>
				</li>
				<% } else { %>
				<li class="list-group-item">No posts available</li>
				<% } %>
				<form action="/addPostToTopic" method="get">
					<input type="hidden" name="title" value="<%= topic.Title %>" />
					<button type="submit" class="btn btn-primary home-btn">
						Add Post to Topic
					</button>
				</form>
				<button type="submit" class="btn btn-outline-primary home-btn">
					Subscribe to Topic
				</button>
				<hr class="my-4" />
				<% }); %>
			</ul>
		</div>
	</body>
</html>
